# Maze Generator & Solver (C)

이 프로젝트는 C 언어로 구현된 **미로 생성 및 경로 탐색 프로그램**입니다.  
사용자가 입력한 크기(SZ)에 맞춰 무작위로 벽이 배치된 미로를 생성하고,  
DFS(Depth-First Search, 깊이 우선 탐색) 기반 알고리즘으로 출발점부터 도착점까지의 유효한 경로를 탐색합니다.

---

## 주요 기능

- 사용자 입력을 받아 5x5부터 30x30까지 크기의 미로 생성
- 전체 셀 중 약 70%를 벽(1)로 구성하되, 반드시 경로가 존재하도록 보장
- 경로가 끊기지 않도록 벽을 추가하고, 마지막에 무작위로 벽을 더해 밀도 조절
- DFS 기반 경로 탐색 알고리즘을 통해 시작점(0, 0)부터 도착점(SZ-1, SZ-1)까지 이동 가능 여부 판단
- 경로 탐색이 실패할 경우 벽을 되돌리는 로직 포함

---

## 코드 구성 설명

### struct COORD

- `int row`, `int col`로 구성된 좌표 구조체
- 미로 내 위치를 표현할 때 사용됨

---

### 스택 관련

#### path_stack[900], top

- 경로 탐색 중 지나온 위치를 저장하는 스택
- 최대 900개(30x30 미로 기준)의 좌표를 저장 가능
- `top`은 현재 스택의 최상단 인덱스를 나타냄

#### isStackEmpty()

- 스택이 비어있는지 확인 (`top == -1`일 때 true)

#### isStackFull()

- 스택이 가득 찼는지 확인 (`top == 899`일 때 true)

#### push(struct COORD \_c)

- 좌표 `_c`를 스택에 추가
- 경로를 탐색할 때 다음 위치로 이동하기 전, 현재 위치를 저장함

#### pop()

- 스택에서 가장 마지막에 저장된 위치를 꺼냄
- 돌아갈 수 없을 때 이전 위치로 백트래킹할 때 사용

#### peek()

- 스택의 top 요소를 반환하되, 꺼내지는 않음
- 다음 갈 곳이 없는 경우, 현재 위치 기준으로 더 탐색 가능한 곳이 있는지 확인할 때 사용

---

### 방문 처리 관련

#### visited[900], visitedindex

- 이미 방문한 좌표를 저장하는 배열
- 중복 방문을 피하기 위해 사용됨

#### checkVisited(struct COORD \_c)

- 해당 좌표 `_c`가 이미 방문한 곳인지 확인
- 탐색 중 중복 방문을 방지

#### addToVisited(struct COORD \_c)

- 방문한 좌표 `_c`를 `visited` 배열에 추가

---

### 미로 상태 확인

#### isWithinMap(struct COORD \_c)

- `_c` 좌표가 미로 범위 내에 있는지 확인
- 행과 열이 0 이상 SZ 미만이어야 유효한 좌표임

#### isWall(struct COORD \_c)

- 해당 좌표가 벽(1)인지 여부 확인

#### checkDestination(struct COORD \_c, struct COORD \_dst)

- `_c`가 목적지 `_dst`와 같은지 확인
- 도착 여부를 판단하는 데 사용

---

### 경로 탐색

#### findWhereToGo(struct COORD \_c)

- 현재 좌표 `_c`에서 상하좌우를 차례대로 탐색
- 아직 방문하지 않았고, 벽이 아닌 유효한 위치가 있으면 해당 좌표를 반환
- 갈 수 있는 곳이 없다면 `(-1, -1)` 반환

#### findPath(struct COORD \_s, struct COORD \_d)

- DFS 알고리즘 핵심 함수
- 시작점 `_s`에서부터 도착점 `_d`까지 경로를 탐색
- `push`, `pop`, `findWhereToGo`, `addToVisited` 등을 활용하여 스택 기반 DFS 수행
- 도착지에 도달하면 `1` 반환, 도달할 수 없으면 `0` 반환

---

### 미로 생성 및 검사

#### main()

1. **미로 크기 입력**

   - 사용자로부터 미로의 크기(SZ)를 입력받습니다.
   - 입력값이 5보다 작거나 30보다 크면 프로그램을 종료합니다.

2. **미로 공간 동적 할당**

   - `maze`라는 2차원 배열을 동적으로 생성하여 크기에 맞는 미로 공간을 준비합니다.
   - 처음에는 모든 값을 0(길)로 초기화합니다.

3. **벽의 목표 개수 설정**

   - 전체 셀 수의 약 70%를 벽으로 설정하기 위해 `wallTarget`을 계산합니다.

4. **벽 무작위 배치 (유효 경로 보장)**

   - (0,0) 시작점과 (SZ-1, SZ-1) 도착점을 제외하고, 무작위 위치에 벽(1)을 배치합니다.
   - 매번 벽을 추가한 후 `findPath()`를 통해 유효한 경로가 여전히 존재하는지 확인합니다.
   - 경로가 없어지면 방금 추가한 벽을 되돌립니다.
   - 만약 더 이상 유효 경로를 유지하면서 벽을 추가할 수 없다면 중단합니다.

5. **남은 벽 강제 채우기**

   - 위 과정에서 목표 개수만큼 벽을 다 채우지 못한 경우, 남은 벽을 무작위로 채웁니다.
   - 이 과정에서는 유효한 경로 여부를 확인하지 않고 강제 추가되므로, 경로가 막힐 수 있습니다.

6. **최종 미로 출력**

   - 완성된 미로를 콘솔에 출력합니다.
   - 0은 길, 1은 벽을 의미합니다.

7. **최종 경로 유효성 검사**

   - 다시 한 번 `findPath()`를 호출하여 최종 미로에 경로가 존재하는지 확인합니다.
   - 경로가 존재하면 "유효하다"고 출력하고, 없으면 경고 메시지를 출력합니다.

8. **메모리 해제**
   - 동적 할당한 2차원 배열 `maze`를 반복문을 통해 모두 해제하여 메모리 누수를 방지합니다.

---
